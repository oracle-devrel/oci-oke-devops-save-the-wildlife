(()=>{"use strict";var e,o,t={997:(e,o,t)=>{var r=t(992);let s;function n(e){postMessage({type:"log",body:`Comms Worker: ${JSON.stringify(e)}`})}onmessage=({data:e})=>{switch(e.type){case"player.trace.change":s.emit("player.trace.change",e.body);break;case"game.start":n("game.start"),s.emit("game.start",e.body);break;case"close":n("Socket closing"),s.close();break;case"items.collision":s.emit("items.collision",e.body);break;case"init":const{wsURL:o,yourId:t,yourName:a}=e.body;!function(e,o,t){n(`WebWorker commsWorker start on ${e}`),s=(0,r.io)(e,{transports:["websocket"]}),n(`I am ${t} with id ${o} joining the game`),s.emit("player.info.joining",{id:o,name:t}),s.io.on("error",(e=>postMessage({error:e}))),s.on("connect_error",(e=>postMessage({error:e}))),s.on("connect",(()=>{postMessage({type:"connect"})})),s.on("disconnect",(()=>{n("disconnect event"),postMessage({type:"disconnect"})})),s.on("player.trace.all",(e=>{delete e[o],postMessage({type:"player.trace.all",body:e})})),s.on("game.end",(()=>{postMessage({type:"game.end"})})),s.on("items.all",(e=>{postMessage({type:"items.all",body:e})})),s.on("item.new",(e=>{postMessage({type:"item.new",body:e})})),s.on("item.destroy",(e=>{postMessage({type:"item.destroy",body:e})})),s.on("server.info",(e=>{postMessage({type:"server.info",body:e})})),s.on("player.info.all",(e=>{delete e[o],postMessage({type:"player.info.all",body:e})})),s.on("game.on",(e=>{postMessage({type:"game.on",body:e})})),s.on("player.info.joined",(e=>{e[o]&&n('ERROR "player.info.joined" for myself'),postMessage({type:"player.info.joined",body:e})})),s.on("player.info.left",(e=>{n(`"player.info.left" ${JSON.stringify(e)}`),postMessage({type:"player.info.left",body:e})}))}(o,t,a)}}}},r={};function s(e){var o=r[e];if(void 0!==o)return o.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,s),n.exports}s.m=t,s.x=()=>{var e=s.O(void 0,[992],(()=>s(997)));return s.O(e)},e=[],s.O=(o,t,r,n)=>{if(!t){var a=1/0;for(l=0;l<e.length;l++){for(var[t,r,n]=e[l],i=!0,p=0;p<t.length;p++)(!1&n||a>=n)&&Object.keys(s.O).every((e=>s.O[e](t[p])))?t.splice(p--,1):(i=!1,n<a&&(a=n));if(i){e.splice(l--,1);var c=r();void 0!==c&&(o=c)}}return o}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[t,r,n]},s.d=(e,o)=>{for(var t in o)s.o(o,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((o,t)=>(s.f[t](e,o),o)),[])),s.u=e=>"bundle.92acf419ca4265ade8a7.js",s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var o=s.g.document;if(!e&&o&&(o.currentScript&&(e=o.currentScript.src),!e)){var t=o.getElementsByTagName("script");t.length&&(e=t[t.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={997:1};s.f.i=(o,t)=>{e[o]||importScripts(s.p+s.u(o))};var o=self.webpackChunkweb=self.webpackChunkweb||[],t=o.push.bind(o);o.push=o=>{var[r,n,a]=o;for(var i in n)s.o(n,i)&&(s.m[i]=n[i]);for(a&&a(s);r.length;)e[r.pop()]=1;t(o)}})(),o=s.x,s.x=()=>s.e(992).then(o),s.x()})();
//# sourceMappingURL=bundle.fbf68d34f4c9eac72800.js.map